<template>
  <Navbar/>
    <div>
      <div class="card cart" >
        <div v-if="this.getProducts.length ===0" class="">
          <div  class="intro py-3 text-center"> 
            <h1>MENU NOT READY</h1> 
            <div class="pt-5">
            <svg style="max-width: 400px; height: auto;" viewBox="0 0 457 474" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0)">
<path d="M103.752 165.689L86.4302 177.05L266.833 452.107L284.155 440.746L103.752 165.689Z" fill="#E6E6E6"/>
<path d="M62.5129 62.1777L102.591 123.284C103.367 124.468 103.641 125.911 103.354 127.296C103.066 128.682 102.239 129.896 101.056 130.673C99.8723 131.449 98.4291 131.723 97.0436 131.435C95.658 131.147 94.4436 130.32 93.6675 129.137L47.5928 58.8876C41.3388 58.3654 35.0528 59.3978 29.2944 61.8929L79.4947 138.433C80.2703 139.616 80.5442 141.059 80.2561 142.444C79.968 143.829 79.1415 145.044 77.9584 145.819C76.7753 146.595 75.3324 146.87 73.9471 146.582C72.5618 146.294 71.3474 145.468 70.5711 144.285L20.3707 67.7456C15.7879 72.033 12.3364 77.3873 10.3236 83.3315L56.3983 153.581C57.1739 154.764 57.4478 156.207 57.1597 157.592C56.8716 158.978 56.0451 160.192 54.862 160.968C53.6789 161.744 52.236 162.018 50.8507 161.73C49.4654 161.443 48.251 160.617 47.4747 159.434L7.39656 98.327C6.36718 115.365 11.9223 135.56 24.0967 154.122C46.7234 188.621 83.632 204.41 106.534 189.389C129.437 174.368 129.66 134.224 107.034 99.7258C94.8593 81.1635 78.5503 68.0222 62.5129 62.1777Z" fill="#E6E6E6"/>
<path d="M181.419 128.061H160.703V457H181.419V128.061Z" fill="#E6E6E6"/>
<path d="M170.747 149.404C198.136 149.404 220.339 115.959 220.339 74.702C220.339 33.4452 198.136 0 170.747 0C143.358 0 121.155 33.4452 121.155 74.702C121.155 115.959 143.358 149.404 170.747 149.404Z" fill="#E6E6E6"/>
<path d="M170.747 136.166C193.283 136.166 211.551 108.647 211.551 74.702C211.551 40.7565 193.283 13.2383 170.747 13.2383C148.212 13.2383 129.944 40.7565 129.944 74.702C129.944 108.647 148.212 136.166 170.747 136.166Z" fill="#CCCCCC"/>
<path d="M228.5 473.878C354.697 473.878 457 468.008 457 460.767C457 453.526 354.697 447.656 228.5 447.656C102.303 447.656 0 453.526 0 460.767C0 468.008 102.303 473.878 228.5 473.878Z" fill="#E6E6E6"/>
<path d="M363.634 460.574C278.001 445.139 190.298 445.139 104.666 460.574C103.305 460.821 101.907 460.766 100.571 460.413C99.2341 460.06 97.9912 459.419 96.9296 458.533C95.8681 457.648 95.0138 456.54 94.4271 455.288C93.8404 454.036 93.5356 452.671 93.5342 451.289V333.962H374.765V451.289C374.764 452.671 374.459 454.036 373.872 455.288C373.285 456.54 372.431 457.648 371.37 458.533C370.308 459.419 369.065 460.06 367.728 460.413C366.392 460.766 364.994 460.821 363.634 460.574V460.574Z" fill="#02C9D0"/>
<path d="M349.027 247.333C342.534 247.327 336.085 248.406 329.947 250.526C320.994 231.108 306.689 214.646 288.709 203.073C270.73 191.5 249.822 185.295 228.44 185.187C207.058 185.079 186.089 191.072 167.993 202.463C149.897 213.854 135.426 230.17 126.278 249.497C117.27 246.97 107.786 246.645 98.6259 248.549C89.4657 250.453 80.8974 254.531 73.6426 260.438C66.3878 266.346 60.659 273.911 56.9388 282.496C53.2187 291.08 51.6161 300.433 52.2661 309.766C52.9161 319.1 55.7996 328.14 60.6738 336.126C65.5479 344.112 72.2699 350.81 80.2736 355.655C88.2773 360.5 97.3282 363.351 106.664 363.967C115.999 364.583 125.346 362.947 133.917 359.195C144.219 374.893 158.29 387.76 174.844 396.62C191.398 405.48 209.909 410.052 228.684 409.917C247.46 409.781 265.903 404.944 282.328 395.847C298.753 386.749 312.637 373.682 322.711 357.837C330.582 361.811 339.251 363.95 348.067 364.094C356.883 364.239 365.617 362.385 373.614 358.671C381.611 354.957 388.663 349.481 394.24 342.652C399.818 335.824 403.777 327.82 405.82 319.243C407.862 310.666 407.936 301.738 406.034 293.128C404.133 284.518 400.307 276.451 394.842 269.532C389.377 262.612 382.416 257.02 374.482 253.176C366.547 249.331 357.845 247.333 349.027 247.333V247.333Z" fill="#02C9D0"/>
<path d="M116.133 297.552H114.878C114.835 280.837 118.534 264.324 125.705 249.225L126.839 249.763C119.749 264.694 116.091 281.023 116.133 297.552V297.552Z" fill="#3F3D56"/>
<path d="M340.867 297.552H339.611C339.65 281.404 336.159 265.442 329.383 250.785L330.523 250.259C337.376 265.081 340.906 281.222 340.867 297.552V297.552Z" fill="#3F3D56"/>
<path d="M93.6857 388.558L93.3828 387.339C93.7371 387.251 129.418 378.488 181.707 374.14C229.969 370.127 302.665 369.159 374.918 387.339L374.611 388.557C302.536 370.422 229.998 371.385 181.837 375.389C129.642 379.728 94.0391 388.47 93.6857 388.558Z" fill="#3F3D56"/>
<path d="M93.6857 405.507L93.3828 404.288C93.7371 404.2 129.418 395.437 181.707 391.089C229.969 387.076 302.665 386.108 374.918 404.289L374.611 405.506C302.536 387.371 229.998 388.336 181.837 392.338C129.642 396.677 94.0391 405.419 93.6857 405.507Z" fill="#3F3D56"/>
<path d="M93.6857 422.456L93.3828 421.237C93.7371 421.15 129.418 412.386 181.707 408.038C229.969 404.025 302.665 403.057 374.918 421.238L374.611 422.455C302.536 404.32 229.998 405.285 181.837 409.287C129.642 413.626 94.0391 422.368 93.6857 422.456Z" fill="#3F3D56"/>
<path d="M324.713 330.293L309.502 325.122L324.104 250.59L314.065 249.677C304.276 257.188 291.24 260.132 274.518 257.891L301.288 298.351L287.638 307.987L244.093 255.755C242.13 253.4 241.055 250.432 241.055 247.367C241.055 244.525 241.979 241.761 243.688 239.49C245.396 237.22 247.797 235.567 250.528 234.78L297.029 221.385L351.483 227.47C359.716 240.021 360.038 248.75 347.505 251.268L324.713 330.293Z" fill="#2F2E41"/>
<path d="M309.145 359.287C307.573 359.188 306.046 358.719 304.689 357.919C303.332 357.118 302.183 356.009 301.335 354.681C300.487 353.354 299.964 351.845 299.809 350.277C299.653 348.709 299.87 347.127 300.441 345.658L308.003 326.214C311.844 318.937 317.115 319.848 323.34 326.214L326.382 335.137C326.633 335.872 326.732 336.65 326.675 337.424C326.617 338.198 326.403 338.952 326.047 339.642L318.676 353.892C317.782 355.619 316.405 357.049 314.713 358.007C313.021 358.965 311.086 359.41 309.145 359.287V359.287Z" fill="#2F2E41"/>
<path d="M289.487 333.825C287.914 333.725 286.388 333.256 285.031 332.456C283.674 331.655 282.524 330.546 281.676 329.219C280.829 327.891 280.306 326.382 280.15 324.814C279.995 323.246 280.212 321.664 280.783 320.195L288.345 300.751C292.186 293.474 297.457 294.385 303.682 300.751L306.724 309.674C306.975 310.409 307.074 311.187 307.016 311.961C306.959 312.735 306.745 313.489 306.388 314.179L299.018 328.429C298.124 330.156 296.747 331.586 295.055 332.545C293.362 333.503 291.428 333.947 289.487 333.825Z" fill="#2F2E41"/>
<path d="M299.159 150.2C308.568 150.2 316.195 142.573 316.195 133.165C316.195 123.756 308.568 116.129 299.159 116.129C289.751 116.129 282.124 123.756 282.124 133.165C282.124 142.573 289.751 150.2 299.159 150.2Z" fill="#FFB9B9"/>
<path d="M325.626 157.198L302.201 169.366L297.334 147.462L313.457 137.423L325.626 157.198Z" fill="#FFB9B9"/>
<path d="M353.917 230.512C330.544 223.452 309.336 219.794 293.988 225.34C299.278 210.458 289.514 187.731 278.777 164.498C283.41 158.443 290.796 156.097 299.159 155.068C308.31 161.712 314.691 157.447 319.541 147.158C330.121 146.734 340.317 150.48 350.266 156.893C342.489 181.806 343.889 206.338 353.917 230.512Z" fill="#3F3D56"/>
<path d="M293.683 228.991C289.992 231.167 286.586 234.831 283.34 239.334C277.855 235.977 273.028 232.154 269.225 227.606C266.563 224.382 264.748 220.545 263.944 216.442C263.141 212.339 263.374 208.1 264.623 204.11L275.019 170.324C275.882 167.518 277.56 165.031 279.839 163.18L281.211 162.065L294.9 187.923L281.211 213.476C282.947 218.131 288.062 223.507 293.683 228.991Z" fill="#3F3D56"/>
<path d="M298.396 254.751C297.154 255.317 295.799 255.586 294.436 255.538C293.072 255.489 291.739 255.124 290.542 254.471C289.344 253.818 288.315 252.896 287.535 251.777C286.755 250.657 286.247 249.372 286.05 248.022L283.787 232.533L291.697 228.274L301.735 241.415C302.537 242.465 303.092 243.682 303.359 244.975C303.626 246.269 303.598 247.606 303.277 248.887C302.956 250.169 302.351 251.361 301.506 252.376C300.66 253.392 299.597 254.203 298.396 254.751V254.751Z" fill="#FFB9B9"/>
<path d="M316.347 132.419L313.438 132.505L305.37 121.076C295.031 122.145 286.56 126.636 279.391 133.517L278.664 128.671C277.97 124.049 279.075 119.338 281.749 115.506C284.423 111.674 288.464 109.012 293.041 108.069H293.041C295.445 107.573 297.924 107.567 300.33 108.051C302.737 108.534 305.021 109.498 307.047 110.884C309.072 112.27 310.798 114.051 312.12 116.118C313.443 118.186 314.335 120.499 314.743 122.92L316.347 132.419Z" fill="#2F2E41"/>
<path d="M283.634 239.34C283.068 238.099 282.799 236.743 282.847 235.38C282.896 234.017 283.261 232.684 283.914 231.486C284.567 230.289 285.489 229.259 286.608 228.48C287.728 227.7 289.013 227.192 290.363 226.995L305.852 224.732L310.111 232.642L296.97 242.68C295.92 243.482 294.703 244.037 293.41 244.304C292.116 244.571 290.779 244.543 289.498 244.222C288.216 243.901 287.024 243.295 286.009 242.45C284.993 241.605 284.182 240.542 283.634 239.34V239.34Z" fill="#FFB9B9"/>
<path d="M356.868 225.251C342.132 226.395 326.042 230.991 309.198 237.509C308.989 232.509 307.175 227.709 304.026 223.819C319.325 219.79 333.207 215.061 341.749 207.696L336.577 168.757L347.833 155.98L349.774 156.993C351.387 157.831 352.805 158.999 353.937 160.42C355.069 161.841 355.89 163.485 356.346 165.244C361.099 183.731 363.21 201.443 361.759 218.112C361.946 219.692 361.553 221.287 360.654 222.6C359.755 223.913 358.409 224.855 356.868 225.251V225.251Z" fill="#3F3D56"/>
<path d="M60.1922 457.07C46.487 465.642 32.7818 465.639 19.0766 457.059C18.6427 456.792 18.2903 456.411 18.0578 455.958C17.8252 455.505 17.7214 454.996 17.7575 454.488L22.034 398.894H56.6231L61.5088 454.468C61.551 454.981 61.4503 455.496 61.2179 455.955C60.9855 456.414 60.6305 456.8 60.1922 457.07V457.07Z" fill="#3F3D56"/>
<path d="M39.169 405.812C48.8086 405.812 56.6231 402.996 56.6231 399.523C56.6231 396.05 48.8086 393.234 39.169 393.234C29.5293 393.234 21.7148 396.05 21.7148 399.523C21.7148 402.996 29.5293 405.812 39.169 405.812Z" fill="#3F3D56"/>
<path d="M52.8496 397.4C43.7546 403.798 34.9501 403.798 26.436 397.4V387.338H52.8496V397.4Z" fill="#02C9D0"/>
<path d="M39.6428 392.369C46.9367 392.369 52.8496 390.116 52.8496 387.338C52.8496 384.559 46.9367 382.307 39.6428 382.307C32.3489 382.307 26.436 384.559 26.436 387.338C26.436 390.116 32.3489 392.369 39.6428 392.369Z" fill="#6C63FF"/>
<path d="M40.272 387.338C40.9666 387.338 41.5297 387.057 41.5297 386.709C41.5297 386.362 40.9666 386.08 40.272 386.08C39.5773 386.08 39.0142 386.362 39.0142 386.709C39.0142 387.057 39.5773 387.338 40.272 387.338Z" fill="#E6E6E6"/>
<path d="M46.2109 387.338C46.9056 387.338 47.4687 387.057 47.4687 386.709C47.4687 386.362 46.9056 386.08 46.2109 386.08C45.5163 386.08 44.9531 386.362 44.9531 386.709C44.9531 387.057 45.5163 387.338 46.2109 387.338Z" fill="#E6E6E6"/>
<path d="M43.2412 388.823C43.9358 388.823 44.499 388.541 44.499 388.194C44.499 387.846 43.9358 387.565 43.2412 387.565C42.5465 387.565 41.9834 387.846 41.9834 388.194C41.9834 388.541 42.5465 388.823 43.2412 388.823Z" fill="#E6E6E6"/>
<path d="M31.3633 388.823C32.0579 388.823 32.6211 388.541 32.6211 388.194C32.6211 387.846 32.0579 387.565 31.3633 387.565C30.6686 387.565 30.1055 387.846 30.1055 388.194C30.1055 388.541 30.6686 388.823 31.3633 388.823Z" fill="#E6E6E6"/>
<path d="M34.3325 387.338C35.0271 387.338 35.5903 387.057 35.5903 386.709C35.5903 386.362 35.0271 386.08 34.3325 386.08C33.6378 386.08 33.0747 386.362 33.0747 386.709C33.0747 387.057 33.6378 387.338 34.3325 387.338Z" fill="#E6E6E6"/>
<path d="M37.3022 389.565C37.9969 389.565 38.56 389.284 38.56 388.937C38.56 388.589 37.9969 388.308 37.3022 388.308C36.6076 388.308 36.0444 388.589 36.0444 388.937C36.0444 389.284 36.6076 389.565 37.3022 389.565Z" fill="#E6E6E6"/>
<path d="M439.979 457.07C426.274 465.642 412.569 465.639 398.864 457.059C398.43 456.792 398.077 456.411 397.845 455.958C397.612 455.505 397.508 454.996 397.545 454.488L401.821 398.894H436.41L441.296 454.468C441.338 454.981 441.237 455.496 441.005 455.955C440.772 456.414 440.417 456.8 439.979 457.07V457.07Z" fill="#3F3D56"/>
<path d="M418.956 405.812C428.595 405.812 436.41 402.996 436.41 399.523C436.41 396.05 428.595 393.234 418.956 393.234C409.316 393.234 401.502 396.05 401.502 399.523C401.502 402.996 409.316 405.812 418.956 405.812Z" fill="#3F3D56"/>
<path d="M432.637 397.4C423.542 403.798 414.737 403.798 406.223 397.4V387.338H432.637V397.4Z" fill="#02C9D0"/>
<path d="M419.43 392.369C426.724 392.369 432.637 390.116 432.637 387.338C432.637 384.559 426.724 382.307 419.43 382.307C412.136 382.307 406.223 384.559 406.223 387.338C406.223 390.116 412.136 392.369 419.43 392.369Z" fill="#6C63FF"/>
<path d="M420.059 387.338C420.753 387.338 421.316 387.057 421.316 386.709C421.316 386.362 420.753 386.08 420.059 386.08C419.364 386.08 418.801 386.362 418.801 386.709C418.801 387.057 419.364 387.338 420.059 387.338Z" fill="#E6E6E6"/>
<path d="M425.998 387.338C426.693 387.338 427.256 387.057 427.256 386.709C427.256 386.362 426.693 386.08 425.998 386.08C425.303 386.08 424.74 386.362 424.74 386.709C424.74 387.057 425.303 387.338 425.998 387.338Z" fill="#E6E6E6"/>
<path d="M423.029 388.823C423.723 388.823 424.287 388.541 424.287 388.194C424.287 387.846 423.723 387.565 423.029 387.565C422.334 387.565 421.771 387.846 421.771 388.194C421.771 388.541 422.334 388.823 423.029 388.823Z" fill="#E6E6E6"/>
<path d="M411.151 388.823C411.845 388.823 412.408 388.541 412.408 388.194C412.408 387.846 411.845 387.565 411.151 387.565C410.456 387.565 409.893 387.846 409.893 388.194C409.893 388.541 410.456 388.823 411.151 388.823Z" fill="#E6E6E6"/>
<path d="M414.12 387.338C414.814 387.338 415.377 387.057 415.377 386.709C415.377 386.362 414.814 386.08 414.12 386.08C413.425 386.08 412.862 386.362 412.862 386.709C412.862 387.057 413.425 387.338 414.12 387.338Z" fill="#E6E6E6"/>
<path d="M417.09 389.565C417.784 389.565 418.347 389.284 418.347 388.937C418.347 388.589 417.784 388.308 417.09 388.308C416.395 388.308 415.832 388.589 415.832 388.937C415.832 389.284 416.395 389.565 417.09 389.565Z" fill="#E6E6E6"/>
</g>
<defs>
<clipPath id="clip0">
<rect width="457" height="473.878" fill="white"/>
</clipPath>
</defs>
</svg>
          </div>
          </div>
        </div>
        <div v-if="this.getProducts.length >=1" >
          <div class="intro py-3 text-center"> 
            <h1>TODAY'S MENU</h1>
          </div>
          <ul class="list-group todos mx-auto">
            <li
            v-for="(product) in this.getProducts"
            v-bind:key="product.id"
            class="list-group-item">
              <div>
                <span style="float: left"><b>{{ product.name }}</b></span><br />
                <span style="float: left">{{ product.description }}</span>
                <div class="quantityBtn">                  
                  <div>                    
                    <!-- <a @click="incrementItemQuantity(product)" href="#" v-on:click.prevent class="badge badge-success btnLight">Add to cart</a> -->
                      <div class="col" >
                        <a href="#" v-if="product.qty !=0" @click="decrementItemQuantity(product)" v-on:click.prevent><i class="fas fa-minus" style="font-size: 10px; color: #132a5e"></i></a>
                        <a href="#" class="border quantity" >{{ product.qty }}</a>
                        <a href="#" @click="incrementItemQuantity(product), createOrder('Takeaway')"  v-on:click.prevent><i class="fas fa-plus" style="font-size: 10px; color: #132a5e"></i></a>
                      </div>                 
                  </div>    
                </div>
              </div>
            </li>
          </ul>
        </div>      
      </div>
      <div class="card cart" v-if="this.getCart.length >=1">
        <div class="text-center" style="display:none;">
          <div class="intro py-3 text-center"><h5>Order type</h5></div>
          <div class="row py-5">
            <div class="col-sm">
              <button :class="{active:this.getOrder.deliveryType == 'Takeaway'}" type="button" @click="createOrder('Takeaway')"  v-on:click.prevent class="btn btn-outline-info">Takeaway</button>
            </div>
            <div class="col-sm">
              <button disabled :class="{active:this.getOrder.deliveryType == 'Late lunch'}" type="button" @click="createOrder('Late lunch')"  v-on:click.prevent class="btn btn-outline-info">Late lunch</button>
            </div>
            <div class="col-sm">
              <button disabled :class="{active:this.getOrder.deliveryType == 'Meeting'}" type="button" @click="createOrder('Meeting')"  v-on:click.prevent class="btn btn-outline-info">Meeting</button>
            </div>            
          </div>          
        </div>
        <div v-if="this.getOrder.deliveryType" class="text-right py-4" >
          <a href="#" @click="goToCart" v-on:click.prevent><i class="fa fa-long-arrow-right" style="font-size: 50px; color: #132a5e"></i></a>
        </div>
      </div>      
    </div>
</template>

<script>
// @ is an alias to /src
import Navbar from '@/components/Navbar.vue'
import Menu from '@/components/Menu.vue'
import { mapGetters, mapActions, mapMutations } from 'vuex'
const axios = require('axios');

export default {
  name: 'Home',
  components: {
    Menu, Navbar
  },
  computed: {
    ...mapGetters([  
      'getProducts',   
      'getCart',   
      'getOrder', 
    ]),
  },
  data() {
    return { 
      selectedDeliveryType: null
    }
  }, 
  created() {
    axios
      .get( process.env.VUE_APP_BACKEND_URL + 'SaveMenu')
      .then((response) => {
        if(response.data.length <1){
          this.removeProducts();
          this.emptyOrder();
          this.emptyCart();
        }else{
          if(Object.keys(this.getProducts).length === 0){      
            this.addProducts();
          } 
        }
      })
      .catch((error) => {
        console.error(error);
        this.$toast.error("Something went wrong, please try again.",
          {
            position:"bottom-right",
            duration: 4000,
          }
        );
    });
  },
  methods: {
    ...mapMutations([
      'incrementItemQuantity',
      'decrementItemQuantity',      
    ]),
    ...mapActions([
      'addOrder', 
      'removeProducts',
      'addProducts',
      'emptyOrder',
      'emptyCart',
    ]), 
    createOrder(orderType){
      this.selectedDeliveryType = orderType
      const order = {
        deliveryType: this.selectedDeliveryType,
        userComment: null,
        email: null,
        id: null
      }  
      this.addOrder(order);
    },
    goToCart(){
      this.$router.push({ name: 'Cart' })
    }   
  },  
}
</script>

<style scoped>
.quantityBtn{
  float: right;
}
.list-group-item {
  background-color: #ffffff;
  border-bottom: 1px solid rgba(0,0,0,.125);
  border-left: none;
  border-right: none;
}
.quantity {
  margin: 10px;
}
.badge{
  display: revert;
}
.btnBlue{
  background-color: #132A5E;
  border-color: #060f25;
}
.btnLight{
  border-color: #0bbbc1;
  background-color: #02C9D0;
}
.btn-outline-info{
  color: #02C9D0;
  border-color: #02C9D0;
}
.btn-outline-info:hover{
  color: #fff;
  border-color: #02C9D0;
  background-color: #02C9D0;
}
.active{
  background-color: #02C9D0;
  border-color: #02C9D0;
}
.btn-outline-info:not(:disabled):not(.disabled).active, .btn-outline-info:not(:disabled):not(.disabled):active, .show>.btn-outline-info.dropdown-toggle {
  color: #fff;
  background-color: #02C9D0;
  border-color: #02C9D0;
  outline: none;
}
@media (max-width: 768px) and (min-width: 481px) {
  .btn-outline-info{
    margin: 10px;
  }
}
@media (max-width: 480px) {
  .btn-outline-info{
    margin: 10px;
  }
  .quantityBtn{
  float: left;
  margin-top: 20px;
  margin-right: 50%;
  }
}
</style>